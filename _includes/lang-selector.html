<!-- ì–¸ì–´ ì•„ì´ì½˜ ì„ íƒ ë²„ì „ -->
<style>
.lang-icons {
  display: flex;
  gap: 15px;
  margin: 10px 0;
}

.lang-icon {
  font-size: 2rem;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.lang-icon:hover {
  transform: scale(1.2);
}
</style>

<div class="lang-icons" role="list" aria-label="Select Language">
  <!-- í•œêµ­ì–´ -->
  <span
    role="listitem"
    class="lang-icon"
    onclick="switchLang('ko')"
    title="í•œêµ­ì–´"
    aria-current="{% if site.active_lang == 'ko' %}true{% else %}false{% endif %}"
    tabindex="0"
    onkeydown="if(event.key==='Enter' || event.key===' ') { switchLang('ko'); }"
  >
    ğŸ‡°ğŸ‡·
  </span>

  <!-- English -->
  <span
    role="listitem"
    class="lang-icon"
    onclick="switchLang('en')"
    title="English"
    aria-current="{% if site.active_lang == 'en' %}true{% else %}false{% endif %}"
    tabindex="0"
    onkeydown="if(event.key==='Enter' || event.key===' ') { switchLang('en'); }"
  >
    ğŸ‡ºğŸ‡¸
  </span>
</div>

<script>
  const base = "{{ site.baseurl }}"; // ì˜ˆ: "/sermon"

  function switchLang(targetLang) {
    let path = window.location.pathname;

    // baseurl ë¶™ì—¬ì£¼ê¸°
    if (!path.startsWith(base)) path = base + path;

    let newPath;

    if (targetLang === 'ko') {
      // í•œêµ­ì–´ ì„ íƒ
      if (path.startsWith(base + "/en")) {
        newPath = path.replace(base + "/en", base);
      } else {
        newPath = path; // ì´ë¯¸ í•œêµ­ì–´
      }
    } else if (targetLang === 'en') {
      // ì˜ì–´ ì„ íƒ
      if (path.startsWith(base + "/en")) {
        newPath = path; // ì´ë¯¸ ì˜ì–´
      } else if (path === base || path === base + "/") {
        newPath = base + "/en/";
      } else {
        newPath = path.replace(base, base + "/en");
      }
    } else {
      newPath = base; // fallback
    }

    // ëì— í•­ìƒ "/" ì¶”ê°€
    if (!newPath.endsWith("/")) newPath += "/";

    window.location.href = newPath;
  }
</script>